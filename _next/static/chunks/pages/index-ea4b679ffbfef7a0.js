(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{6740:function(t){t.exports=function(){function t(o,u){if(!(this instanceof t))return new t(o,u);var s=Math.pow(10,(u=Object.assign({},e,u)).precision);this.intValue=o=n(o,u),this.value=o/s,u.increment=u.increment||1/s,u.groups=u.useVedic?i:r,this.s=u,this.p=s}function n(n,e){var r=!(2<arguments.length)||void 0===arguments[2]||arguments[2],i=e.decimal,o=e.errorOnInvalid,u=e.fromCents,s=Math.pow(10,e.precision),c=n instanceof t;if(c&&u)return n.intValue;if("number"==typeof n||c)i=c?n.value:n;else if("string"==typeof n)o=RegExp("[^-\\d"+i+"]","g"),i=RegExp("\\"+i,"g"),i=(i=n.replace(/\((.*)\)/,"-$1").replace(o,"").replace(i,"."))||0;else{if(o)throw Error("Invalid Input");i=0}return u||(i=(i*s).toFixed(4)),r?Math.round(i):i}var e={symbol:"$",separator:",",decimal:".",errorOnInvalid:!1,precision:2,pattern:"!#",negativePattern:"-!#",format:function(t,n){var e=n.pattern,r=n.negativePattern,i=n.symbol,o=n.separator,u=n.decimal;n=n.groups;var s=(""+t).replace(/^-/,"").split("."),c=s[0];return s=s[1],(0<=t.value?e:r).replace("!",i).replace("#",c.replace(n,"$1"+o)+(s?u+s:""))},fromCents:!1},r=/(\d)(?=(\d{3})+\b)/g,i=/(\d)(?=(\d\d)+\d\b)/g;return t.prototype={add:function(e){var r=this.s,i=this.p;return t((this.intValue+n(e,r))/(r.fromCents?1:i),r)},subtract:function(e){var r=this.s,i=this.p;return t((this.intValue-n(e,r))/(r.fromCents?1:i),r)},multiply:function(n){var e=this.s;return t(this.intValue*n/(e.fromCents?1:Math.pow(10,e.precision)),e)},divide:function(e){var r=this.s;return t(this.intValue/n(e,r,!1),r)},distribute:function(n){var e=this.intValue,r=this.p,i=this.s,o=[],u=Math[0<=e?"floor":"ceil"](e/n),s=Math.abs(e-u*n);for(r=i.fromCents?1:r;0!==n;n--){var c=t(u/r,i);0<s--&&(c=c[0<=e?"add":"subtract"](1/r)),o.push(c)}return o},dollars:function(){return~~this.value},cents:function(){return~~(this.intValue%this.p)},format:function(t){var n=this.s;return"function"==typeof t?t(this,n):n.format(this,Object.assign({},n,t))},toString:function(){var t=this.s,n=t.increment;return(Math.round(this.intValue/this.p/n)*n).toFixed(t.precision)},toJSON:function(){return this.value}},t}()},3454:function(t,n,e){"use strict";var r,i;t.exports=(null==(r=e.g.process)?void 0:r.env)&&"object"==typeof(null==(i=e.g.process)?void 0:i.env)?e.g.process:e(7663)},5557:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return e(9053)}])},9053:function(t,n,e){"use strict";e.r(n),e.d(n,{__N_SSG:function(){return h},default:function(){return d}});var r=e(5893),i=e(9008),o=e.n(i),u=e(6740),s=e.n(u),c=e(7294),a=function(t){let{cartItems:n,onIncrement:e,onDecrement:i,onDelete:o,onCheckout:u}=t;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h1",{children:"Your cart:"}),n.length>0?(0,r.jsxs)("ul",{children:[n.map(t=>(0,r.jsxs)("li",{children:[t.name," x ",t.quantity," (",s()(t.quantity*t.price.unit_amount,{fromCents:!0}).format(),") ",(0,r.jsx)("button",{onClick:()=>e(t),children:"+"})," ",(0,r.jsx)("button",{onClick:()=>i(t),children:"-"})," ",(0,r.jsx)("button",{onClick:()=>o(t),children:"delete"})]},t.id)),(0,r.jsxs)("li",{children:["Total:"," ",s()(n.reduce((t,n)=>t+n.quantity*n.price.unit_amount,0),{fromCents:!0}).format()," ",(0,r.jsx)("button",{onClick:()=>u(n),children:"Proceed to Checkout"})]})]}):(0,r.jsx)("p",{children:"(cart is empty)"})]})},l=e(3454);async function f(t){console.log(l.env.NEXT_PUBLIC_CHECKOUT_ENDPOINT),fetch(l.env.NEXT_PUBLIC_CHECKOUT_ENDPOINT,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cart:t})}).then(t=>{console.log(t)}).catch(t=>{console.error(t)})}var h=!0;function d(t){let{allProducts:n}=t,[e,i]=(0,c.useState)([]),u=t=>{!function(t,n,e){let r=n.find(n=>n.id===t.id);e(r?n.map(n=>n.id===t.id?{...n,quantity:n.quantity+1}:n):[...n,{...t,quantity:1}])}(t,e,i)},l=t=>{!function(t,n,e){let r=n.filter(n=>n.id!==t.id);e(r)}(t,e,i)},h=t=>{!function(t,n,e){let r=n.map(n=>n.id===t.id?{...n,quantity:n.quantity+1}:n);e(r)}(t,e,i)},d=t=>{!function(t,n,e){let r=n.map(n=>n.id===t.id?{...n,quantity:n.quantity-1}:n);e(r.filter(t=>t.quantity>0))}(t,e,i)},p=t=>{f(t)};return(0,c.useEffect)(()=>{let t=JSON.parse(localStorage.getItem("cartItems"))||[];i(t)},[]),(0,c.useEffect)(()=>{localStorage.setItem("cartItems",JSON.stringify(e))},[e]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o(),{children:(0,r.jsx)("title",{children:"it's ya continuously integrating boi webstore"})}),(0,r.jsx)("h1",{children:"It's ya boi!"}),(0,r.jsx)("p",{children:"Doin it right once again"}),(0,r.jsx)("ul",{children:n.map(t=>(0,r.jsxs)("li",{children:[t.name,", ",s()(t.price.unit_amount,{fromCents:!0}).format(),(0,r.jsx)("button",{onClick:()=>u(t),children:"Add to Cart"})]},t.id))}),(0,r.jsx)(a,{cartItems:e,onIncrement:h,onDecrement:d,onDelete:l,onCheckout:p})]})}},7663:function(t){!function(){var n={229:function(t){var n,e,r,i=t.exports={};function o(){throw Error("setTimeout has not been defined")}function u(){throw Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{e="function"==typeof clearTimeout?clearTimeout:u}catch(t){e=u}}();var c=[],a=!1,l=-1;function f(){a&&r&&(a=!1,r.length?c=r.concat(c):l=-1,c.length&&h())}function h(){if(!a){var t=s(f);a=!0;for(var n=c.length;n;){for(r=c,c=[];++l<n;)r&&r[l].run();l=-1,n=c.length}r=null,a=!1,function(t){if(e===clearTimeout)return clearTimeout(t);if((e===u||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}(t)}}function d(t,n){this.fun=t,this.array=n}function p(){}i.nextTick=function(t){var n=Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];c.push(new d(t,n)),1!==c.length||a||s(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(t){return[]},i.binding=function(t){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw Error("process.chdir is not supported")},i.umask=function(){return 0}}},e={};function r(t){var i=e[t];if(void 0!==i)return i.exports;var o=e[t]={exports:{}},u=!0;try{n[t](o,o.exports,r),u=!1}finally{u&&delete e[t]}return o.exports}r.ab="//";var i=r(229);t.exports=i}()},9008:function(t,n,e){t.exports=e(2636)}},function(t){t.O(0,[774,888,179],function(){return t(t.s=5557)}),_N_E=t.O()}]);