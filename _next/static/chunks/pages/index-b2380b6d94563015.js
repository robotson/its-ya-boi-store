(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{6740:function(t){t.exports=function(){function t(o,a){if(!(this instanceof t))return new t(o,a);var s=Math.pow(10,(a=Object.assign({},e,a)).precision);this.intValue=o=n(o,a),this.value=o/s,a.increment=a.increment||1/s,a.groups=a.useVedic?i:r,this.s=a,this.p=s}function n(n,e){var r=!(2<arguments.length)||void 0===arguments[2]||arguments[2],i=e.decimal,o=e.errorOnInvalid,a=e.fromCents,s=Math.pow(10,e.precision),c=n instanceof t;if(c&&a)return n.intValue;if("number"==typeof n||c)i=c?n.value:n;else if("string"==typeof n)o=RegExp("[^-\\d"+i+"]","g"),i=RegExp("\\"+i,"g"),i=(i=n.replace(/\((.*)\)/,"-$1").replace(o,"").replace(i,"."))||0;else{if(o)throw Error("Invalid Input");i=0}return a||(i=(i*s).toFixed(4)),r?Math.round(i):i}var e={symbol:"$",separator:",",decimal:".",errorOnInvalid:!1,precision:2,pattern:"!#",negativePattern:"-!#",format:function(t,n){var e=n.pattern,r=n.negativePattern,i=n.symbol,o=n.separator,a=n.decimal;n=n.groups;var s=(""+t).replace(/^-/,"").split("."),c=s[0];return s=s[1],(0<=t.value?e:r).replace("!",i).replace("#",c.replace(n,"$1"+o)+(s?a+s:""))},fromCents:!1},r=/(\d)(?=(\d{3})+\b)/g,i=/(\d)(?=(\d\d)+\d\b)/g;return t.prototype={add:function(e){var r=this.s,i=this.p;return t((this.intValue+n(e,r))/(r.fromCents?1:i),r)},subtract:function(e){var r=this.s,i=this.p;return t((this.intValue-n(e,r))/(r.fromCents?1:i),r)},multiply:function(n){var e=this.s;return t(this.intValue*n/(e.fromCents?1:Math.pow(10,e.precision)),e)},divide:function(e){var r=this.s;return t(this.intValue/n(e,r,!1),r)},distribute:function(n){var e=this.intValue,r=this.p,i=this.s,o=[],a=Math[0<=e?"floor":"ceil"](e/n),s=Math.abs(e-a*n);for(r=i.fromCents?1:r;0!==n;n--){var c=t(a/r,i);0<s--&&(c=c[0<=e?"add":"subtract"](1/r)),o.push(c)}return o},dollars:function(){return~~this.value},cents:function(){return~~(this.intValue%this.p)},format:function(t){var n=this.s;return"function"==typeof t?t(this,n):n.format(this,Object.assign({},n,t))},toString:function(){var t=this.s,n=t.increment;return(Math.round(this.intValue/this.p/n)*n).toFixed(t.precision)},toJSON:function(){return this.value}},t}()},5557:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return e(4047)}])},4047:function(t,n,e){"use strict";e.r(n),e.d(n,{__N_SSG:function(){return v},default:function(){return y}});var r=e(5893),i=e(9008),o=e.n(i),a=e(6740),s=e.n(a),c=e(7294),u=function(t){let{cartItems:n,onIncrement:e,onDecrement:i,onDelete:o,onCheckout:a}=t;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h1",{children:"Your cart:"}),n.length>0?(0,r.jsxs)("ul",{children:[n.map(t=>(0,r.jsxs)("li",{children:[t.name," x ",t.quantity," (",s()(t.quantity*t.price.unit_amount,{fromCents:!0}).format(),") ",(0,r.jsx)("button",{onClick:()=>e(t),children:"+"})," ",(0,r.jsx)("button",{onClick:()=>i(t),children:"-"})," ",(0,r.jsx)("button",{onClick:()=>o(t),children:"delete"})]},t.id)),(0,r.jsxs)("li",{children:["Total:"," ",s()(n.reduce((t,n)=>t+n.quantity*n.price.unit_amount,0),{fromCents:!0}).format()," ",(0,r.jsx)("button",{onClick:()=>a(n),children:"Proceed to Checkout"})]})]}):(0,r.jsx)("p",{children:"(cart is empty)"})]})},l="https://js.stripe.com/v3",d=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,f=function(){for(var t=document.querySelectorAll('script[src^="'.concat(l,'"]')),n=0;n<t.length;n++){var e=t[n];if(d.test(e.src))return e}return null},h=function(t){var n=t&&!t.advancedFraudSignals?"?advancedFraudSignals=false":"",e=document.createElement("script");e.src="".concat(l).concat(n);var r=document.head||document.body;if(!r)throw Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(e),e},p=null;async function m(t){console.log("https://iyb-store.demo.codes/api/createCheckout"),fetch("https://iyb-store.demo.codes/api/createCheckout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cart:t})}).then(t=>t.json()).then(t=>{window.location.href=t.url}).catch(t=>{console.error(t)})}Promise.resolve().then(function(){return null!==p?p:p=new Promise(function(t,n){if("undefined"==typeof window||"undefined"==typeof document){t(null);return}if(window.Stripe,window.Stripe){t(window.Stripe);return}try{var e=f();e||(e=h(null)),e.addEventListener("load",function(){window.Stripe?t(window.Stripe):n(Error("Stripe.js not available"))}),e.addEventListener("error",function(){n(Error("Failed to load Stripe.js"))})}catch(t){n(t);return}})}).catch(function(t){console.warn(t)});var v=!0;function y(t){let{allProducts:n}=t,[e,i]=(0,c.useState)([]),a=t=>{!function(t,n,e){let r=n.find(n=>n.id===t.id);e(r?n.map(n=>n.id===t.id?{...n,quantity:n.quantity+1}:n):[...n,{...t,quantity:1}])}(t,e,i)},l=t=>{!function(t,n,e){let r=n.filter(n=>n.id!==t.id);e(r)}(t,e,i)},d=t=>{!function(t,n,e){let r=n.map(n=>n.id===t.id?{...n,quantity:n.quantity+1}:n);e(r)}(t,e,i)},f=t=>{!function(t,n,e){let r=n.map(n=>n.id===t.id?{...n,quantity:n.quantity-1}:n);e(r.filter(t=>t.quantity>0))}(t,e,i)},h=t=>{m(t)};return(0,c.useEffect)(()=>{let t=JSON.parse(localStorage.getItem("cartItems"))||[];i(t)},[]),(0,c.useEffect)(()=>{localStorage.setItem("cartItems",JSON.stringify(e))},[e]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o(),{children:(0,r.jsx)("title",{children:"it's ya continuously integrating boi webstore"})}),(0,r.jsx)("h1",{children:"It's ya boi!"}),(0,r.jsx)("p",{children:"Doin it right once again"}),(0,r.jsx)("ul",{children:n.map(t=>(0,r.jsxs)("li",{children:[t.name,", ",s()(t.price.unit_amount,{fromCents:!0}).format(),(0,r.jsx)("button",{onClick:()=>a(t),children:"Add to Cart"})]},t.id))}),(0,r.jsx)(u,{cartItems:e,onIncrement:d,onDecrement:f,onDelete:l,onCheckout:h})]})}},9008:function(t,n,e){t.exports=e(2636)}},function(t){t.O(0,[774,888,179],function(){return t(t.s=5557)}),_N_E=t.O()}]);