(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[190],{8086:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cart",function(){return i(3681)}])},3681:function(e,t,i){"use strict";i.r(t),i.d(t,{__N_SSG:function(){return S},checkoutCart:function(){return N},default:function(){return q}});var n=i(5893),a=i(8360),s=i(7294),l=i(3156),r=i(5861),o=i(3321),d=i(6242),c=i(4267),m=i(3965),u=i(7357),h=i(7720),x=i(7742),f=i(3841),p=i(431),j=i(4054),Z=i(4518),b=i(6886),g=i(8396),y=i(2734),_=i(3795),v=i(1664),C=i.n(v),w=i(6740),k=i.n(w),S=!0;async function N(e){fetch("https://iyb-store.demo.codes/api/createCheckout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cart:e})}).then(e=>e.json()).then(e=>{window.location.href=e.url}).catch(e=>{console.error(e)})}function q(e){let{allProducts:t}=e,{cartContext:i,setCartContext:v}=(0,a.i)(),[w,S]=(0,s.useState)([]),q=(0,y.Z)(),I=(0,g.Z)(q.breakpoints.up("md")),E=(e,t)=>{let n=e.target.value,a=i.map(e=>e.id===t?{...e,quantity:n}:e);v(a)};(0,s.useEffect)(()=>{let e=t.filter(e=>i.find(t=>t.id===e.id)).map(e=>({...e,quantity:i.find(t=>t.id===e.id).quantity}));S(e)},[i,t]);let P=e=>{let t=i.filter(t=>t.id!==e.id);v(t)},W=()=>{N(i)};return 0===i.length?(0,n.jsx)(l.Z,{maxWidth:"lg",children:(0,n.jsxs)(r.Z,{variant:"h6",children:["Your cart is empty. ",(0,n.jsx)(_.Z,{href:"/",component:C(),children:"Return to products"})," to find something you like."]})}):(0,n.jsx)(l.Z,{maxWidth:"lg",children:(0,n.jsxs)(b.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(b.ZP,{item:!0,xs:12,md:7,lg:6,children:(0,n.jsx)(d.Z,{elevation:1,sx:{display:"flex",flexDirection:"column",p:"1em"},children:w.map((e,t)=>(0,n.jsxs)(u.Z,{children:[(0,n.jsxs)(u.Z,{sx:{display:"flex",flexDirection:"row"},children:[(0,n.jsx)(m.Z,{component:"img",sx:{width:"8em",height:"8em"},image:"images/".concat(e.local_image),alt:e.name}),(0,n.jsxs)(c.Z,{sx:{display:"flex",flexDirection:"column",pt:"1em",pl:"1em",pr:0,"&:last-child":{paddingBottom:0}},children:[(0,n.jsx)(r.Z,{variant:"button",children:e.name}),(0,n.jsxs)(r.Z,{variant:"subtitle2",children:["1 ",e.unit_label," ",(0,n.jsxs)(u.Z,{sx:{display:"inline",fontWeight:"bold"},children:[k()(e.price.unit_amount,{fromCents:!0}).format()," "]}),"each"]}),(0,n.jsx)(h.Z,{sx:{borderColor:"whitesmoke",my:".1em"}}),(0,n.jsxs)(r.Z,{variant:"caption",sx:{fontStyle:"italic"},children:["US shipping rate"," ",(0,n.jsxs)(u.Z,{sx:{display:"inline",fontWeight:"bold"},children:[k()(e.price.metadata.us_ship_rate,{fromCents:!0}).format()," "]})]}),(0,n.jsxs)(r.Z,{variant:"caption",sx:{fontStyle:"italic"},children:["(",k()(e.price.metadata.us_ship_additional,{fromCents:!0}).format()," ","shipping for each add'l item)"]})]})]}),(0,n.jsxs)(u.Z,{sx:{display:"flex",flexDirection:"row"},children:[(0,n.jsxs)(j.Z,{sx:{mt:1,mb:1,minWidth:"8em"},size:"small",children:[(0,n.jsx)(f.Z,{sx:{zIndex:0},children:"Quantity"}),(0,n.jsxs)(x.Z,{labelId:"demo-select-small",id:"demo-select-small",value:e.quantity,label:"Quantity",onChange:t=>E(t,e.id),children:[(0,n.jsx)(p.Z,{value:1,children:"1"}),(0,n.jsx)(p.Z,{value:2,children:"2"}),(0,n.jsx)(p.Z,{value:3,children:"3"}),(0,n.jsx)(p.Z,{value:4,children:"4"}),(0,n.jsx)(p.Z,{value:5,children:"5"}),(0,n.jsx)(p.Z,{value:6,children:"6"}),(0,n.jsx)(p.Z,{value:7,children:"7"}),(0,n.jsx)(p.Z,{value:8,children:"8"}),(0,n.jsx)(p.Z,{value:9,children:"9"}),(0,n.jsx)(p.Z,{value:10,children:"10"})]})]}),(0,n.jsx)(r.Z,{variant:"h6",sx:{fontWeight:"bold",display:"flex",ml:"1em",alignItems:"center"},children:k()(e.price.unit_amount*e.quantity,{fromCents:!0}).format()}),(0,n.jsx)(o.Z,{variant:"outlined",sx:{height:"2em",ml:"auto",mt:"1.15em",mr:"0.2em"},onClick:()=>P(e),children:"Remove"})]}),t!==w.length-1&&(0,n.jsx)(h.Z,{sx:{my:"1em"}})]},e.id))})}),(0,n.jsx)(b.ZP,{item:!0,xs:12,md:5,lg:6,sx:{bottom:15,position:"sticky"},children:(0,n.jsxs)(u.Z,{children:[(0,n.jsx)(d.Z,{elevation:I?4:8,sx:{display:"flex",flexDirection:"column",p:".2em",mt:"".concat(I?".5em":"0"),backgroundColor:"#fafafa",backgroundImage:"linear-gradient(to bottom, #fafafa, ".concat(Z.Z[50],")")},children:(0,n.jsxs)(c.Z,{sx:{color:"SlateGray","&:last-child":{paddingBottom:".5em"}},children:[(0,n.jsxs)(u.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:1,borderColor:"silver",pb:1,mb:1},children:[(0,n.jsx)(r.Z,{variant:"subtitle2",children:"Subtotal:"}),(0,n.jsx)(r.Z,{variant:"subtitle2",sx:{textAlign:"right"},children:k()(i.reduce((e,i)=>{let n=t.find(e=>e.id===i.id);return e+n.price.unit_amount*i.quantity},0),{fromCents:!0}).format()})]}),(0,n.jsxs)(u.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:1,borderColor:"silver",pb:1,mb:1},children:[(0,n.jsx)(r.Z,{variant:"subtitle2",children:"Shipping:"}),(0,n.jsx)(r.Z,{variant:"subtitle2",sx:{textAlign:"right"},children:k()(i.reduce((e,i)=>{let n=t.find(e=>e.id===i.id),a=Number(n.price.metadata.us_ship_rate),s=Number(n.price.metadata.us_ship_additional)*(i.quantity-1);return e+a+s},0),{fromCents:!0}).format()})]}),(0,n.jsxs)(u.Z,{sx:{color:"black",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,n.jsx)(r.Z,{variant:"subtitle1",children:"Total:"}),(0,n.jsx)(r.Z,{variant:"subtitle1",sx:{textAlign:"right"},children:k()(i.reduce((e,i)=>{let n=t.find(e=>e.id===i.id),a=Number(n.price.metadata.us_ship_rate),s=Number(n.price.metadata.us_ship_additional)*(i.quantity-1);return e+a+s+n.price.unit_amount*i.quantity},0),{fromCents:!0}).format()})]})]})}),(0,n.jsx)(o.Z,{variant:"contained",color:"secondary",sx:{mt:".7em",width:"100%"},onClick:W,children:"Checkout with Stripe"})]})})]})})}}},function(e){e.O(0,[547,40,433,774,888,179],function(){return e(e.s=8086)}),_N_E=e.O()}]);